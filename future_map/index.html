<html>
  <head>
    <style type="text/css">
      html, body { height: 100%; margin: 0; padding: 0; }
      #map { height: 100%; }
    </style>
  </head>
  <body>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <div id="map"></div>
    <script type="text/javascript">

var map;
function initMap() {
   map = new google.maps.Map(document.getElementById('map'),
      {
    zoom: 3,
    center: new google.maps.LatLng(45, -100),
    mapTypeId: google.maps.MapTypeId.TERRAIN
  });
  $.getJSON('places.json', function(data) {

    // Each region refers to a geoJSON file that contains polygon data
    $.each(data.regions, function(index, name) {
      var filename = 'geo-json/countries/'+name+'.geo.json';

      $.getJSON(filename, function(data) {
        var poly_array = [data.features[0].geometry.coordinates]

        if (data.features[0].geometry.type == "MultiPolygon") {
          poly_array = poly_array[0];
        };

        var coordinates = $.map(poly_array, function(coord_array) {
          return [$.map(coord_array[0], function(coord) {
            return new google.maps.LatLng(coord[1], coord[0])
          })]
        })

        var polygon = new google.maps.Polygon({
          paths: coordinates,
          strokeColor: "#0000FF",
          strokeOpacity: 0.8,
          strokeWeight: 2,
          fillColor: "#0000FF",
          fillOpacity: 0.35
        });

        polygon.setMap(map);
      })
    });

    // Each place is a marker
    $.each(data.places, function(index, place) {
      var coordinate = new google.maps.LatLng(place.coordinate[1], place.coordinate[0]);
      var infowindow = new google.maps.InfoWindow({
        content: place.name
      });
      var marker = new google.maps.Marker({
        position: coordinate,
        icon: place.icon,
        map: map,
        title: place.name
      });
      google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map, marker);
      });
    });
  });
};

    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAqvHhVcrfO4BfjWr5Ie3TW1L52Ftmpig0&callback=initMap">
    </script>
  </body>
</html>